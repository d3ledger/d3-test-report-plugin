buildscript {
    ext.kotlin_version = '1.3.10'
    repositories {
        mavenCentral()
        jcenter()
    }
    dependencies {
        classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version"
    }
}

plugins {
    id 'com.gradle.plugin-publish' version '0.10.0'
    id 'java-gradle-plugin'
}

apply plugin: 'kotlin'
apply plugin: 'maven'

group='com.d3ledger'
version = '1'

repositories {
    jcenter()
}

dependencies {
    // unit tests
    testCompile('org.junit.jupiter:junit-jupiter-api:5.2.0')
    testRuntime('org.junit.jupiter:junit-jupiter-engine:5.2.0')
    // https://mvnrepository.com/artifact/org.mockito/mockito-all
    testCompile group: 'org.mockito', name: 'mockito-all', version: '2.0.2-beta'
    compile("com.nhaarman.mockitokotlin2:mockito-kotlin:2.1.0")

    implementation gradleApi()
    compile 'org.jetbrains.kotlin:kotlin-stdlib-jdk8'
    // https://mvnrepository.com/artifact/com.github.spullara.mustache.java/compiler
    compile group: 'com.github.spullara.mustache.java', name: 'compiler', version: '0.9.5'
}

pluginBundle {
    website = 'https://d3ledger.com/'
    vcsUrl = 'https://github.com/d3ledger/d3-test-report-plugin'
    tags = ['test', 'report','integrationTest']
}

gradlePlugin {
    plugins {
        d3testReportPlugin {
            id = 'jp.co.soramitsu.testreport'
            displayName = 'D3 integration test report plugin'
            description = 'Plugin that creates pretty looking integration test reports for D3 projects'
            implementationClass = 'com.d3ledger.ReportPlugin'
        }
    }
}

compileKotlin {
    kotlinOptions.jvmTarget = "1.8"
}
compileTestKotlin {
    kotlinOptions.jvmTarget = "1.8"
}
